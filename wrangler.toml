name = "roots-tech-news"
compatibility_date = "2024-10-27"
compatibility_flags = ["nodejs_compat"]
pages_build_output_dir = "dist"

# Build Configuration
# Note: Cloudflare Pages should use npm instead of bun to avoid lockfile issues
# Configure in Cloudflare Dashboard → Pages → Settings → Builds & deployments
# Recommended build command: npm ci && npm run build
# (npm ci is faster and more reliable for CI/CD - uses lockfile directly)

# Environment Variables
# Add these in Cloudflare Pages Dashboard → Settings → Environment Variables
# RESEND_API_KEY: Your Resend API key (starts with re_)
# RESEND_AUDIENCE_ID (optional): Resend Audience ID for managing subscribers

# KV Namespace binding for RSS feed caching
[[kv_namespaces]]
binding = "FEED_CACHE"
id = "e1d9907115a74821bea90376d9f43b0f"
# Note: Add preview_id for local development/preview environments
# Create with: wrangler kv:namespace create "FEED_CACHE" --preview
