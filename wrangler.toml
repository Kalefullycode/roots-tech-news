name = "roots-tech-news"
compatibility_date = "2024-10-27"
compatibility_flags = ["nodejs_compat"]
pages_build_output_dir = "dist"

# Build Configuration
# Note: Cloudflare Pages should use npm instead of bun to avoid lockfile issues
# Configure in Cloudflare Dashboard → Pages → Settings → Builds & deployments
# Build command: npm install --include=optional && npm run build
# (Using --include=optional flag to ensure Rollup's platform-specific binaries are installed)

# Environment Variables
# Add these in Cloudflare Pages Dashboard → Settings → Environment Variables
# RESEND_API_KEY: Your Resend API key (starts with re_)
# RESEND_AUDIENCE_ID (optional): Resend Audience ID for managing subscribers
# ADMIN_API_KEY: Strong random key (32+ chars) for protecting admin endpoints (/api/newsletter/broadcast, /api/newsletter/stats)
# YOUTUBE_API_KEY (optional): YouTube Data API key for video feeds

# KV Namespace binding for RSS feed caching
[[kv_namespaces]]
binding = "FEED_CACHE"
id = "e1d9907115a74821bea90376d9f43b0f"
# Note: Add preview_id for local development/preview environments
# Create with: wrangler kv:namespace create "FEED_CACHE" --preview
